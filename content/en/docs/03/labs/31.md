---
title: "3.1 Tasks: Grafana intro"
weight: 2
sectionnumber: 3.1
onlyWhenNot: baloise
---

### Task {{% param sectionnumber %}}.1: Install Grafana TODO

### Task {{% param sectionnumber %}}.2: Configure Prometheus to scrape Grafana metrics

This is repetition. Grafana instruments the Prometheus client library and provides a variety of metrics at the `/metrics` endpoint: <http://{{% param replacePlaceholder.grafana %}}/metrics>

Configure Prometheus to scrape these metrics

{{% details title="Hints" mode-switcher="normalexpertmode" %}}
TODO

Check if the Grafana instance appears in the targets section of Prometheus (<http://{{% param replacePlaceholder.prometheus %}}/targets>). In addition you can use the following query to show list all metrics of the new target:

{{% /details %}}

### Task {{% param sectionnumber %}}.3: Prometheus/Thanos datasource

To be able to use our Prometheus Server as datasource in Grafana dashboards you have to configure it in Grafana. As we are interested in the global view, we are again going to use the Thanos Querier instead of the Prometheus as a Datasource.

TODO

Visualize the Prometheus metric
```promql
(1 - (
  sum by(instance) (node_memory_MemFree_bytes
  +
  node_memory_Cached_bytes
  +
  node_memory_Buffers_bytes
)
)
/
  sum by(instance) (node_memory_MemTotal_bytes))
* 100 
```
under `Explore` to test your data source.

{{% details title="Hints" mode-switcher="normalexpertmode" %}}

Navigate to **Explore** (Icon on the left navigation menu that looks like a compass)

* Choose **Prometheus** as data source
* Ensure you are using the `Code`-View and not the `Builder`-View
* Enter the above query into the field
* Hit **Run query**

{{% /details %}}
